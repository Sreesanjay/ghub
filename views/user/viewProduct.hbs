<!-- content -->
<style>

</style>
<section class="py-5 product-view-top">
  <div class="container">
    <div class="row p-0 m-0">
      <aside class="col-lg-6 d-flex flex-column align-items-center p-0">
        <div class="border rounded-4 mb-3 image-container" id="image-container">
          <img src="/Images/Products/{{product.primary_img.filename}}" alt="" id="primary-img-view">
          <i class="fa-regular fa-heart add-to-wish-list-btn mt-2" onclick="addToWishlist(event ,'{{product._id}}')"></i>
        </div>
        <div class="secondary-img-container d-flex align-items-center">
          <i class="fa-solid fa-chevron-left left-img-scroll"></i>
          <div class="d-flex justify-content-center mb-3 sec-img-wrapper">
            {{#each product.secondary_img}}
            <div class="card me-5 d-flex justify-content-center align-items-center" style="min-width:100px;">
              <img style="max-height: 100px; max-width:min-content;" class="rounded-2"
                src="/Images/Products/{{this.filename}}" id="{{this._id}}" onclick="setImgView('{{this._id}}')" />
            </div>
            {{/each}}
          </div>
          <i class="fa-solid fa-chevron-right right-img-scroll"></i>
        </div>
        <!-- thumbs-wrap.// -->
        <!-- gallery-wrap .end// -->
      </aside>
      <main class="col-lg-6 p-0 ps-3">
        <div class="ps-lg-3">
          <h4 class="title text-dark">
            {{product.product_name}}
          </h4>
          <div class="d-flex flex-row my-3">
            <div class="text-warning mb-1 me-2">
              <i class="fa fa-star"></i>
              <i class="fa fa-star"></i>
              <i class="fa fa-star"></i>
              <i class="fa fa-star"></i>
              <i class="fas fa-star-half-alt"></i>
              <span class="ms-1">
                4.5
              </span>
            </div>
            <span class="text-muted"><i class="fas fa-shopping-basket fa-sm mx-1"></i>{{product.stock}} items</span>
            <span class="text-success ms-2">In stock</span>
          </div>

          <div class="mb-3">
            <span class="h5"></span>
            <span class="text-muted"></span>
          </div>

          <div class="row py-3">
            <dt class="col-3">Brand</dt>
            <dd class="col-9">{{product.brand_name}}</dd>
          </div>
          <div class="">
            <p id="prod-disc" class="mb-0" style="height:100px;overflow:hidden;">
              {{product.discription}}
            </p>
            <span id="show-more">...Show More</span>
            <span id="show-less" style="display:none;">...Show Less</span>
          </div>
          <div class="row pt-3">
            <h3 class="col-3 text-danger">₹{{product.prod_price}}</h3>
            <h4 class="col-9 mt-1 text-secondary"><strike>₹{{product.sellig_price}}</strike></h4>
          </div>

          <hr />

          <a href="#" class="btn btn-warning shadow-0"> Buy now </a>
          <a class="btn btn-primary shadow-0" onclick="addToCart(event,'{{product._id}}')"> <i
              class="me-1 fa fa-shopping-basket"></i> Add to cart </a>
        </div>
      </main>
    </div>
  </div>
</section>
<!-- content -->

<section class="bg-light border-top py-4">
  <div class="container">
    <div class="row gx-4">
      <div class="col-lg-8 mb-4">
        <div class="border rounded-2 px-3 py-2 bg-white">
          <!-- Pills navs -->
          <ul class="nav nav-pills nav-justified mb-3" id="ex1" role="tablist">
            <li class="nav-item d-flex" role="presentation">
              <a class="nav-link d-flex align-items-center justify-content-center w-100 bg-light" id="ex1-tab-1"
                data-mdb-toggle="pill" href="#ex1-pills-1" role="tab" aria-controls="ex1-pills-1"
                aria-selected="true">Specification</a>
            </li>
          </ul>
          <!-- Pills navs -->

          <!-- Pills content -->
          <div class="tab-content" id="ex1-content">
            <div class="tab-pane fade show active" id="ex1-pills-1" role="tabpanel" aria-labelledby="ex1-tab-1">
              <table class="table border mt-3 mb-2">
                {{#each product.specification}}
                <tr>
                  <th class="py-2">{{this.spec}}:</th>
                  <td class="py-2">{{this.val}}</td>
                </tr>
                {{/each}}
              </table>
            </div>
          </div>
          <!-- Pills content -->
        </div>
      </div>
      <div class="col-lg-4">
        <div class="px-0 border rounded-2 shadow-0">
          <div class="card">
            <div class="card-body">
              <h5 class="card-title">Similar items</h5>
              {{#each rel_product}}
              <div class="d-flex">
                <a href="#" class="me-3"><img src="/Images/Products/{{this.primary_img.filename}}"
                    style="min-width: 96px; height: 96px;" class="img-md img-thumbnail" />
                </a>
                <div class="info">
                  <a href="#" class="nav-link mb-1">{{this.product_name}} </a>
                  <strong class="text-dark">₹{{this.sellig_price}}</strong>
                </div>
              </div>
              {{/each}}
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</section>

<script>

  let zoom_area = document.getElementById('image-container')
  let zoom_img = document.getElementById('primary-img-view');
  zoom_area.addEventListener('mousemove', (event) => {
    clientX = event.clientX - zoom_area.offsetLeft
    clientY = event.clientY - zoom_area.offsetTop

    mWidth = zoom_area.offsetWidth
    mHeight = zoom_area.offsetHeight

    clientX = clientX / mWidth * 100
    clientY = clientY / mHeight * 100

    zoom_img.style.transform = 'translate(-' + clientX + '%,-' + clientY + '%) scale(2)'
  })
  zoom_area.addEventListener('mouseleave', () => {
    console.log("zoom_out")

    zoom_img.style.transform = 'translate(-50%,-50%) scale(1)'
  })
</script>